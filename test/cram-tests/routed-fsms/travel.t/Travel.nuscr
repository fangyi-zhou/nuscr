(*# CheckDirectedChoiceDisabled #*)

global protocol TravelFlattened(role C, role A, role S) {
  rec Loop {
    choice at C {
      query(string) from C to A;
      quote(int) from A to C;
      continue Loop;
    } or {
      choice at C {
        pay(string) from C to S;
        confirm(int) from S to C;
        accpt(int) from C to A;
      } or {
        reject() from C to A;
      }
    }
  }
} 
